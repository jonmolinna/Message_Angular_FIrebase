<div class="relative inline-block" #dropdownContainer>
  <!-- BUTTON -->
  <button
    type="button"
    class="inline-flex justify-center items-center w-full gap-x-1.5 rounded-md bg-gray-50 px-3 py-2 text-sm font-semibold text-gray-900 hover:bg-gray-100 transition-colors duration-200"
    [class]="classes"
    (click)="toggle()"
    (keydown.arrowdown)="onArrowDown($event)"
    (keydown.arrowup)="onArrowUp($event)"
    (keydown.enter)="onEnter($event)"
    (keydown.escape)="close()"
    [attr.aria-expanded]="isOpen()"
    [attr.aria-haspopup]="true"
    [attr.id]="menuClasses()"
  >
    @if (icon) {
    <span [innerHTML]="icon"></span>
    }
    <!-- Default icon -->
    @else {
    <span>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="size-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"
        />
      </svg>
    </span>
    }
  </button>

  <!-- DROPDOWN MENU -->
  @if(isOpen()) {
  <div
    class="absolute z-10 mt-2 origin-top-right rounded-md bg-white shadow-lg border border-gray-200 transition-all duration-200 ease-out"
    [class]="menuClasses()"
    [class.opacity-100]="isVisible()"
    [class.scale-100]="isVisible()"
    [class.opacity-0]="!isVisible()"
    [class.scale-95]="!isVisible()"
    role="menu"
    [attr.aria-orientation]="'vertical'"
    [attr.aria-labelledby]="triggerId"
    #dropdownMenu
  >
    <div class="py-1" role="none">
      <!-- Custom Content -->
      <ng-content></ng-content>

      <!-- Options from array -->
      @for (option of options; track option.value) {
      <!-- SEPARATOR -->
      @if(option.separator) {
      <div class="border-t border-gray-200 my-1"></div>
      }
      <!--SIN SEPARATOR  -->
      @else {
      <button
        type="button"
        class="flex w-full items-center px-4 py-2 text-sm transition-colors duration-150"
        [class.text-gray-700]="!option.disabled"
        [class.hover:bg-gray-100]="!option.disabled"
        [class.text-gray-400]="option.disabled"
        [class.cursor-not-allowed]="option.disabled"
        [disabled]="option.disabled"
        (click)="selectOption(option)"
        role="menuitem"
      >
        @if(option.icon) {
        <span [innerHTML]="option.icon" class="mr-3 text-lg"></span>
        }
        <span>{{ option.label }}</span>
      </button>
      } }
    </div>
  </div>
  }
</div>