<div class="relative inline-block" #dropdownContainer>
  <!-- BUTTON -->
  <button
    type="button"
    class="inline-flex h-10 w-10 items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground"
    [class]="classes"
    (click)="toggle()"
    (keydown.arrowdown)="onArrowDown($event)"
    (keydown.arrowup)="onArrowUp($event)"
    (keydown.enter)="onEnter($event)"
    (keydown.escape)="close()"
    [attr.aria-expanded]="isOpen()"
    [attr.aria-haspopup]="true"
    [attr.id]="menuClasses()"
  >
    @if (icon) {
    <span [innerHTML]="icon" class="h-4 w-4"></span>
    }
    <!-- Default icon -->
    @else {
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      class="size-6"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"
      />
    </svg>
    }
  </button>

  <!-- DROPDOWN MENU -->
  @if(isOpen()) {
  <div
    class="absolute z-50 min-w-[8rem] overflow-hidden rounded-md border bg-white p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"
    [class]="menuClasses()"
    [class.opacity-100]="isVisible()"
    [class.scale-100]="isVisible()"
    [class.opacity-0]="!isVisible()"
    [class.scale-95]="!isVisible()"
    role="menu"
    [attr.aria-orientation]="'vertical'"
    [attr.aria-labelledby]="triggerId"
    #dropdownMenu
  >
    <!-- Custom Content -->
    <ng-content></ng-content>

    <!-- Options from array -->
    @for (option of options; track option.value) {
      <!-- SEPARATOR -->
      @if(option.separator) {
      <div class="-mx-1 my-1 h-px bg-muted"></div>
      }
      <!--SIN SEPARATOR  -->
      @else {
      <div
        class="relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50"
        [class.hover:bg-accent]="!option.disabled"
        [class.hover:text-accent-foreground]="!option.disabled"
        [class.text-muted-foreground]="option.disabled"
        [class.cursor-not-allowed]="option.disabled"
        [attr.data-disabled]="option.disabled ? 'true' : null"
        (click)="selectOption(option)"
        role="menuitem"
      >
        @if(option.icon) {
        <span [innerHTML]="option.icon" class="mr-2 h-4 w-4"></span>
        }
        <span>{{ option.label }}</span>
      </div>
      } }
  </div>
  }
</div>